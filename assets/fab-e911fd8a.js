import{p as w,d as J,q as T,X as me,an as be,s as D,u as ye,a as K,o as we,i as Se,h as Te,e as Ce,m as Q,a3 as ke,A as S,ag as H,a0 as N,aw as L,l as Z,U as Be,aD as Oe,aE as Ie,f as b,T as U,g as E,v as G,aj as x,as as ze}from"./index-81730b21.js";import{I as Ne,B as xe}from"./icon-4be89cfe.js";import{o as De}from"./onWindowResize-9b069d67.js";import{u as je}from"./swipeItem-96890970.js";import{e as Ae}from"./avatar-6f500ba1.js";var Pe={direction:{type:String,default:"xy"},attraction:String,disabled:Boolean,boundary:{type:Object,default:()=>({top:0,bottom:0,left:0,right:0})},zIndex:{type:[Number,String],default:90},teleport:{type:[String,Object,Boolean],default:"body"},onClick:w()};function j(){return j=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var u=arguments[r];for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s])}return e},j.apply(this,arguments)}function q(e,r,u,s,t,o,i){try{var l=e[o](i),d=l.value}catch(k){u(k);return}l.done?r(d):Promise.resolve(d).then(s,t)}function Xe(e){return function(){var r=this,u=arguments;return new Promise(function(s,t){var o=e.apply(r,u);function i(d){q(o,s,t,i,l,"next",d)}function l(d){q(o,s,t,i,l,"throw",d)}i(void 0)})}}var{n:Ye,classes:Re}=K("drag");function Ve(e,r){return we(),Se(ke,{to:e.teleport===!1?void 0:e.teleport,disabled:e.teleportDisabled||e.teleport===!1},[Te("div",Q({ref:"drag",class:e.classes(e.n(),e.n("$--box"),[e.enableTransition,e.n("--transition")]),style:{"z-index":e.zIndex},onTouchstart:r[0]||(r[0]=function(){return e.handleTouchstart&&e.handleTouchstart(...arguments)}),onTouchmove:r[1]||(r[1]=function(){return e.handleTouchmove&&e.handleTouchmove(...arguments)}),onTouchend:r[2]||(r[2]=function(){return e.handleTouchend&&e.handleTouchend(...arguments)}),onTouchcancel:r[3]||(r[3]=function(){return e.handleTouchend&&e.handleTouchend(...arguments)}),onClick:r[4]||(r[4]=function(){return e.handleClick&&e.handleClick(...arguments)})},e.getAttrs()),[Ce(e.$slots,"default")],16)],8,["to","disabled"])}var _=J({name:"VarDrag",inheritAttrs:!1,props:Pe,setup(e,r){var{attrs:u}=r,s=T(null),t=T(0),o=T(0),i=me({top:0,bottom:0,left:0,right:0}),l=T(!1),d=T(!1),{touching:k,dragging:O,moveX:v,moveY:m,startTouch:h,moveTouch:B,endTouch:y,resetTouch:te}=je(),{disabled:ae}=be(),ne=n=>{e.disabled||(h(n),$())},re=function(){var n=Xe(function*(a){!k.value||e.disabled||(B(a),a.preventDefault(),d.value=!1,l.value=!0,e.direction.includes("x")&&(t.value+=v.value),e.direction.includes("y")&&(o.value+=m.value),W())});return function(c){return n.apply(this,arguments)}}(),ie=()=>{e.disabled||(y(),d.value=!0,le())},oe=n=>{O.value||S(e.onClick,n)},$=()=>{var{left:n,top:a}=A();t.value=n,o.value=a},A=()=>{var n=H(s.value),a=H(window),c=n.top-a.top,g=a.bottom-n.bottom,C=n.left-a.left,X=a.right-n.right,{width:I,height:z}=n,{width:Y,height:R}=a;return{top:c,bottom:g,left:C,right:X,width:I,height:z,halfWidth:I/2,halfHeight:z/2,windowWidth:Y,windowHeight:R}},M=()=>{var n=A(),a=i.left,c=n.windowWidth-i.right-n.width,g=i.top,C=n.windowHeight-i.bottom-n.height;return{minX:a,minY:g,maxX:a<c?c:a,maxY:g<C?C:g}},le=()=>{if(e.attraction!=null){var{halfWidth:n,halfHeight:a,top:c,bottom:g,left:C,right:X}=A(),{minX:I,minY:z,maxX:Y,maxY:R}=M(),ve=C+n-i.left,se=X+n-i.right,fe=c+a-i.top,ce=g+a-i.bottom,ge=ve<=se,he=fe<=ce;e.attraction.includes("x")&&(t.value=ge?I:Y),e.attraction.includes("y")&&(o.value=he?z:R)}},W=()=>{var{minX:n,minY:a,maxX:c,maxY:g}=M();t.value=L(t.value,n,c),o.value=L(o.value,a,g)},F=()=>{var{top:n=0,bottom:a=0,left:c=0,right:g=0}=e.boundary;i.top=N(n),i.bottom=N(a),i.left=N(c),i.right=N(g)},ue=()=>{var n,a=(n=u.style)!=null?n:{};return j({},u,{style:j({},a,{top:l.value?0:a.top,left:l.value?0:a.left,right:l.value?"auto":a.right,bottom:l.value?"auto":a.bottom,transform:l.value?"translate("+t.value+"px, "+o.value+"px)":a.transform})})},P=()=>{l.value&&($(),W())},de=()=>{te(),d.value=!1,l.value=!1,t.value=0,o.value=0};return D(()=>e.boundary,F),De(P),ye(()=>{F(),P()}),{drag:s,x:t,y:o,enableTransition:d,dragging:O,teleportDisabled:ae,n:Ye,classes:Re,getAttrs:ue,handleTouchstart:ne,handleTouchmove:re,handleTouchend:ie,handleClick:oe,resize:P,reset:de}}});_.render=Ve;const p=_;Z(p);var $e={active:Boolean,show:{type:Boolean,default:!0},drag:{type:[Object,Boolean],default:!1},type:{type:String,default:"primary"},position:{type:String,default:"right-bottom"},direction:{type:String,default:"top"},trigger:{type:String,default:"click"},disabled:Boolean,color:String,inactiveIcon:{type:String,default:"plus"},activeIcon:{type:String,default:"window-close"},inactiveIconSize:[Number,String],activeIconSize:[Number,String],fixed:{type:Boolean,default:!0},zIndex:{type:[Number,String],default:90},top:[Number,String],bottom:[Number,String],left:[Number,String],right:[Number,String],elevation:{type:[Boolean,Number,String],default:!0},safeArea:Boolean,teleport:{type:[String,Object,Boolean],default:"body"},onClick:w(),onOpen:w(),onOpened:w(),onClose:w(),onClosed:w(),"onUpdate:active":w()};function Me(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ze(e)}var{classes:V,n:f}=K("fab");const ee=J({name:"VarFab",inheritAttrs:!1,props:$e,setup(e,r){var{slots:u,attrs:s}=r,t=Be(e,"active"),o=T(null),i=T(null),l=(v,m,h)=>{if(v.stopPropagation(),!(e.trigger!=="click"||e.disabled)){if(h===0){S(e.onClick,t.value,v);return}t.value=m,S(e.onClick,t.value,v),S(t.value?e.onOpen:e.onClose)}},d=(v,m)=>{e.trigger!=="hover"||e.disabled||m===0||(t.value=v,S(t.value?e.onOpen:e.onClose))},k=()=>{e.trigger!=="click"||e.disabled||t.value!==!1&&(t.value=!1,S(e.onClose))},O=()=>u.trigger?e.show?u.trigger({active:t.value}):null:E(b(xe,{"var-fab-cover":!0,class:f("trigger"),type:e.type,color:e.color,disabled:e.disabled,elevation:e.elevation,round:!0},{default:()=>[b(Ne,{"var-fab-cover":!0,class:V([t.value,f("trigger-active-icon"),f("trigger-inactive-icon")]),name:t.value?e.activeIcon:e.inactiveIcon,size:t.value?e.inactiveIconSize:e.activeIconSize,transition:200,animationClass:f("--trigger-icon-animation")},null)]}),[[G,e.show]]);return D(()=>e.trigger,()=>{t.value=!1}),D(()=>e.disabled,()=>{t.value=!1}),D(()=>[e.position,e.fixed,e.top,e.bottom,e.left,e.right],()=>{var v;(v=i.value)==null||v.reset()}),Ae(o,"click",k),()=>{var v,m,h=Oe((m=S(u.default))!=null?m:[]),B=Ie(e.drag)?{}:e.drag;return b(p,Q({ref:i,class:V(f("--position-"+e.position),[!e.fixed,f("--absolute")]),style:{top:x(e.top),bottom:x(e.bottom),left:x(e.left),right:x(e.right)},zIndex:e.zIndex,teleport:e.teleport,disabled:e.disabled||!e.drag||!e.fixed,direction:B.direction,attraction:B.attraction,boundary:B.boundary,onClick:y=>l(y,!t.value,h.length)},s),{default:()=>[b("div",{class:V(f(),f("--direction-"+e.direction),[e.safeArea,f("--safe-area")]),ref:o,onMouseleave:()=>d(!1,h.length),onMouseenter:()=>d(!0,h.length)},[b(U,{name:f("--active-transition")},Me(v=O())?v:{default:()=>[v]}),b(U,{name:f("--actions-transition-"+e.direction),onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:()=>[E(b("div",{class:f("actions"),onClick:y=>y.stopPropagation()},[h.map(y=>b("div",{class:f("action")},[y]))]),[[G,e.show&&t.value&&h.length]])]})])]})}}});Z(ee);var Ee=ee;export{Ee as _};
