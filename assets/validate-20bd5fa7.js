import{p as k,d as L,c as T,a as Z,o as y,b as F,e as $,n as d,A as f,Y as Se,Z as ke,$ as H,a0 as Fe,a1 as we,V as ee,l as re,q as D,a2 as c,u as ne,x as Me,r as W,h as B,y as w,k as J,j as I,i as K,F as Ve,a3 as Be,a4 as Te,a5 as $e,a6 as ze,f as Q,a7 as X,w as E,a8 as De,a9 as Ie,aa as ce,L as Ee,t as Pe,ab as Y}from"./index-81730b21.js";import{b as Ne,u as ae,F as Re}from"./AppBack-0f19825b.js";import{l as Oe}from"./shared-8dcc744f.js";import{I as Ae}from"./icon-4be89cfe.js";import{o as Ue}from"./onWindowResize-9b069d67.js";var We={disabled:Boolean,readonly:Boolean,scrollToError:String,scrollToErrorOffsetY:{type:[String,Number],default:0},onSubmit:k(),onReset:k()};function x(e,r,l,a,u,S,p){try{var C=e[S](p),m=C.value}catch(M){l(M);return}C.done?r(m):Promise.resolve(m).then(a,u)}function _(e){return function(){var r=this,l=arguments;return new Promise(function(a,u){var S=e.apply(r,l);function p(m){x(S,a,u,p,C,"next",m)}function C(m){x(S,a,u,p,C,"throw",m)}p(void 0)})}}var{n:je}=Z("form");function Le(e,r){return y(),F("form",{class:d(e.n()),onSubmit:r[0]||(r[0]=function(){return e.handleSubmit&&e.handleSubmit(...arguments)}),onReset:r[1]||(r[1]=function(){return e.handleReset&&e.handleReset(...arguments)})},[$(e.$slots,"default")],34)}var le=L({name:"VarForm",props:We,setup(e){var r=T(()=>e.disabled),l=T(()=>e.readonly),{formItems:a,bindFormItems:u}=Ne(),S=i=>{setTimeout(()=>{var s=ke(i),h=s===window?0:H(s),g=H(i)-h-Fe(e.scrollToErrorOffsetY);we(s,{top:g,animation:Oe})},300)},p=function(){var i=_(function*(s){s.preventDefault();var h=yield m();f(e.onSubmit,h)});return function(h){return i.apply(this,arguments)}}(),C=i=>{i.preventDefault(),M(),f(e.onReset)},m=function(){var i=_(function*(){var s=yield Promise.all(a.map(V=>{var{validate:R}=V;return R()}));if(e.scrollToError){var[,h]=Se(s,V=>V===!1,e.scrollToError),g=h>-1;if(g){var z,N=(z=a[h].instance.proxy)==null?void 0:z.$el;S(N)}return!g}return s.every(V=>V===!0)});return function(){return i.apply(this,arguments)}}(),M=()=>a.forEach(i=>{var{reset:s}=i;return s()}),t=()=>a.forEach(i=>{var{resetValidation:s}=i;return s()}),b={disabled:r,readonly:l};return u(b),{n:je,handleSubmit:p,handleReset:C,validate:m,reset:M,resetValidation:t}}});le.render=Le;const P=le;P.useValidation=ee;P.useForm=ae;re(P);var or=P,oe={value:{type:null,required:!0},id:{type:String,default:""},isFocus:Boolean,size:{type:String,default:"normal"},variant:{type:String,default:"standard"},placeholder:String,line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:String,focusColor:String,blurColor:String,errorMessage:String,formDisabled:Boolean,disabled:Boolean,clearable:Boolean,cursor:String,composing:Boolean,onClick:k(),onClear:k()},{n:U,classes:Ze}=Z("field-decorator"),Ye=["for"];function qe(e,r){var l=W("var-icon");return y(),F("div",{class:d(e.classes(e.n(),e.n("$--box"),e.n("--"+e.variant),[e.size==="small",e.n("--small")],[e.disabled,e.n("--disabled")])),onClick:r[0]||(r[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[B("div",{class:d(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:w({color:e.color,cursor:e.cursor,overflow:e.isFloating?"visible":"hidden"})},[B("div",{class:d(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")]))},[$(e.$slots,"prepend-icon")],2),B("div",{class:d(e.classes(e.n("middle"),[!e.hint,e.n("--middle-non-hint")]))},[$(e.$slots,"default")],2),e.placeholder&&e.hint?(y(),F("label",{key:0,class:d(e.classes(e.n("placeholder"),e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],e.computePlaceholderState())),style:w({color:e.color}),for:e.id},[B("span",null,J(e.placeholder),1)],14,Ye)):I("v-if",!0),B("div",{class:d(e.classes(e.n("icon"),[!e.hint,e.n("--icon-non-hint")]))},[e.clearable&&!e.isEmpty(e.value)?(y(),K(l,{key:0,class:d(e.n("clear-icon")),"var-field-decorator-cover":"",name:"close-circle",onClick:e.handleClear},null,8,["class","onClick"])):I("v-if",!0),$(e.$slots,"append-icon")],2)],6),e.line?(y(),F(Ve,{key:0},[e.variant==="outlined"?(y(),F("fieldset",{key:0,class:d(e.classes(e.n("line"),[e.isFocus,e.n("--line-focus")],[e.errorMessage,e.n("--line-error")],[e.formDisabled||e.disabled,e.n("--line-disabled")])),style:w({borderColor:e.color})},[B("legend",{class:d(e.classes(e.n("line-legend"),[e.isFloating,e.n("line-legend--hint")])),style:w({width:e.legendWidth})},[e.placeholder&&e.hint?(y(),K(Be,{key:0,to:"body"},[B("span",{ref:"placeholderTextEl",class:d(e.classes(e.n("placeholder-text"),e.n("$--ellipsis"),[e.size==="small",e.n("placeholder-text--small")]))},J(e.placeholder),3)])):I("v-if",!0)],6)],6)):(y(),F("div",{key:1,class:d(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:w({background:e.errorMessage?void 0:e.blurColor})},[B("div",{class:d(e.classes(e.n("dot"),[e.isFocus,e.n("--line-focus")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:w({background:e.errorMessage?void 0:e.focusColor})},null,6)],6))],64)):I("v-if",!0)],2)}var se=L({name:"VarFieldDecorator",components:{VarIcon:Ae},props:oe,setup(e,r){var{slots:l}=r,a=D(null),u=D(""),S=T(()=>e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor),p=T(()=>e.hint&&(!c(e.value)||e.isFocus||l["prepend-icon"])),C=()=>{var{hint:b,value:i,composing:s}=e;if(!b&&(!c(i)||s))return U("--placeholder-hidden");if(p.value)return U("--placeholder-hint")},m=()=>{var{size:b,hint:i,variant:s,placeholder:h}=e;if(!h||!i||s!=="outlined"){u.value="";return}var g=Te(a.value),z="var(--field-decorator-outlined-"+b+"-placeholder-space)";u.value="calc("+g.width+" * 0.75 + "+z+" * 2)"},M=b=>{f(e.onClear,b)},t=b=>{f(e.onClick,b)};return Ue(m),ne(m),Me(m),{placeholderTextEl:a,color:S,legendWidth:u,isFloating:p,computePlaceholderState:C,n:U,classes:Ze,isEmpty:c,handleClear:M,handleClick:t}}});se.render=qe;const Ge=se;function j(){return j=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},j.apply(this,arguments)}var He=j({modelValue:String,modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text"},textarea:Boolean,rows:{type:[String,Number],default:8},maxlength:[String,Number],readonly:Boolean,resize:Boolean,autofocus:Boolean,validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:Array,enterkeyhint:String,onFocus:k(),onBlur:k(),onInput:k(),onChange:k(),onClear:k(),"onUpdate:modelValue":k()},$e(oe,["size","variant","placeholder","line","hint","textColor","focusColor","blurColor","disabled","clearable","onClick"])),{n:Je,classes:Ke}=Z("input"),Qe=["placeholder","enterkeyhint"],Xe=["id","disabled","readonly","type","value","placeholder","maxlength","rows","enterkeyhint","inputmode"],xe=["id","disabled","readonly","type","value","placeholder","maxlength","enterkeyhint","inputmode"];function _e(e,r){var l=W("var-field-decorator"),a=W("var-form-details");return y(),F("div",{class:d(e.classes(e.n(),e.n("$--box"))),onMousedown:r[13]||(r[13]=function(){return e.handleMousedown&&e.handleMousedown(...arguments)})},[Q(l,De(Ie({value:e.modelValue,id:e.id,size:e.size,variant:e.variant,placeholder:e.placeholder,line:e.line,hint:e.hint,textColor:e.textColor,focusColor:e.focusColor,blurColor:e.blurColor,isFocus:e.isFocus,errorMessage:e.errorMessage,formDisabled:e.formDisabled,disabled:e.disabled,clearable:e.clearable,cursor:e.cursor,composing:e.isComposing,onClick:e.handleClick,onClear:e.handleClear})),X({"append-icon":E(()=>[$(e.$slots,"append-icon")]),default:E(()=>[e.normalizedType==="password"?(y(),F("input",{key:0,tabindex:"-1",class:d(e.n("autocomplete")),placeholder:e.hint?void 0:e.placeholder,style:w({"--input-placeholder-color":e.placeholderColor}),enterkeyhint:e.enterkeyhint},null,14,Qe)):I("v-if",!0),e.textarea?(y(),F("textarea",{key:1,class:d(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled,readonly:e.formReadonly||e.readonly,type:e.normalizedType,value:e.modelValue,placeholder:e.hint?void 0:e.placeholder,maxlength:e.maxlength,rows:e.rows,enterkeyhint:e.enterkeyhint,inputmode:e.type==="number"?"numeric":void 0,style:w({color:e.errorMessage?void 0:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none","--input-placeholder-color":e.placeholderColor}),onFocus:r[0]||(r[0]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:r[1]||(r[1]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:r[2]||(r[2]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:r[3]||(r[3]=function(){return e.handleChange&&e.handleChange(...arguments)}),onCompositionstart:r[4]||(r[4]=function(){return e.handleCompositionStart&&e.handleCompositionStart(...arguments)}),onCompositionend:r[5]||(r[5]=function(){return e.handleCompositionEnd&&e.handleCompositionEnd(...arguments)})},`
      `,46,Xe)):(y(),F("input",{key:2,class:d(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled,readonly:e.formReadonly||e.readonly,type:e.normalizedType,value:e.modelValue,placeholder:e.hint?void 0:e.placeholder,maxlength:e.maxlength,enterkeyhint:e.enterkeyhint,inputmode:e.type==="number"?"numeric":void 0,style:w({color:e.errorMessage?void 0:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,"--input-placeholder-color":e.placeholderColor}),onFocus:r[6]||(r[6]=function(){return e.handleFocus&&e.handleFocus(...arguments)}),onBlur:r[7]||(r[7]=function(){return e.handleBlur&&e.handleBlur(...arguments)}),onInput:r[8]||(r[8]=function(){return e.handleInput&&e.handleInput(...arguments)}),onChange:r[9]||(r[9]=function(){return e.handleChange&&e.handleChange(...arguments)}),onCompositionstart:r[10]||(r[10]=function(){return e.handleCompositionStart&&e.handleCompositionStart(...arguments)}),onCompositionend:r[11]||(r[11]=function(){return e.handleCompositionEnd&&e.handleCompositionEnd(...arguments)})},null,46,xe))]),_:2},[e.$slots["prepend-icon"]?{name:"prepend-icon",fn:E(()=>[$(e.$slots,"prepend-icon")]),key:"0"}:void 0]),1040),Q(a,{"error-message":e.errorMessage,"extra-message":e.maxlengthText,onMousedown:r[12]||(r[12]=ce(()=>{},["stop"]))},X({_:2},[e.$slots["extra-message"]?{name:"extra-message",fn:E(()=>[$(e.$slots,"extra-message")]),key:"0"}:void 0]),1032,["error-message","extra-message"])],34)}var ie=L({name:"VarInput",components:{VarFormDetails:Re,VarFieldDecorator:Ge},props:He,setup(e){var r=D("var-input-"+ze().uid),l=D(null),a=D(!1),u=D(!1),S=T(()=>e.type==="number"?"text":e.type),p=T(()=>{var{maxlength:n,modelValue:o}=e;return n?c(o)?"0 / "+n:String(o).length+"/"+n:""}),C=T(()=>e.disabled||e.readonly?"":"text"),m=T(()=>{var{hint:n,blurColor:o,focusColor:v}=e;if(!n)return b.value?"var(--field-decorator-error-color)":a.value?v||"var(--field-decorator-focus-color)":o||"var(--field-decorator-blur-color)"}),{bindForm:M,form:t}=ae(),{errorMessage:b,validateWithTrigger:i,validate:s,resetValidation:h}=ee(),g=n=>{Ee(()=>{var{validateTrigger:o,rules:v,modelValue:A}=e;i(o,n,v,A)})},z=n=>{a.value=!0,f(e.onFocus,n),g("onFocus")},N=n=>{a.value=!1,f(e.onBlur,n),g("onBlur")},V=n=>{var o=n.target,{value:v}=o;return e.type==="number"&&(v=he(v)),pe(ge(v))},R=()=>{u.value=!0},ue=n=>{u.value&&(u.value=!1,n.target.dispatchEvent(new Event("input")))},te=n=>{if(!u.value){var o=V(n);f(e["onUpdate:modelValue"],o),f(e.onInput,o,n),g("onInput")}},me=n=>{var o=V(n);f(e.onChange,o,n),g("onChange")},ve=()=>{var{disabled:n,readonly:o,clearable:v,onClear:A}=e;t!=null&&t.disabled.value||t!=null&&t.readonly.value||n||o||!v||(f(e["onUpdate:modelValue"],""),f(A,""),g("onClear"))},fe=n=>{var{disabled:o,onClick:v}=e;t!=null&&t.disabled.value||o||(f(v,n),g("onClick"))},he=n=>{var o=n.indexOf("-"),v=n.indexOf(".");return o>-1&&(n=o===0?"-"+n.replace(/-/g,""):n.replace(/-/g,"")),v>-1&&(n=n.slice(0,v+1)+n.slice(v).replace(/\./g,"")),n.replace(/[^-0-9.]/g,"")},ge=n=>e.modelModifiers.trim?n.trim():n,pe=n=>e.maxlength?n.slice(0,Pe(e.maxlength)):n,be=n=>{var{disabled:o}=e;t!=null&&t.disabled.value||o||n.target===l.value||(O(),n.preventDefault())},q=()=>{f(e["onUpdate:modelValue"],""),h()},G=()=>s(e.rules,e.modelValue),O=()=>{var n;(n=l.value)==null||n.focus()},ye=()=>{l.value.blur()},Ce={reset:q,validate:G,resetValidation:h};return f(M,Ce),ne(()=>{e.autofocus&&O()}),{el:l,id:r,isFocus:a,isComposing:u,errorMessage:b,placeholderColor:m,normalizedType:S,cursor:C,maxlengthText:p,formDisabled:t==null?void 0:t.disabled,formReadonly:t==null?void 0:t.readonly,n:Je,classes:Ke,isEmpty:c,handleFocus:z,handleBlur:N,handleInput:te,handleChange:me,handleClear:ve,handleClick:fe,handleCompositionStart:R,handleCompositionEnd:ue,handleMousedown:be,validate:G,resetValidation:h,reset:q,focus:O,blur:ye}}});ie.render=_e;const de=ie;re(de);var sr=de;function ir(e=Y.global.t("Value cannot be empty")){return r=>!!r||e}function dr(e=Y.global.t("Email format error")){return r=>/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(r)||e}function ur(e,r){return r=r!=null?r:Y.global.t("Length must be {length}",{length:e}),l=>l.length===e||r}export{sr as _,or as a,dr as b,ur as c,ir as v};
